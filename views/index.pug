extends a1layout.pug

block append headBlock
    script. 
        let currentPage;
        window.addEventListener('load', function () {
            currentPage = #{a1.currentPage};
            loadedUp = true;
            console.log("all loaded up and current page is " + currentPage);
        });

        function nextPage(){
            //if currentPage is 1
            //include code below to check if atleast one radio item is selected
            //var checkRadio = document.querySelector('input[name="theIssue"]:checked');

            //if currentPage is 2

            let nextPageCall = currentPage + 1; 
            let callString = "/activity1/?page=" + nextPageCall;
            let nextLink = document.getElementById("next");
            nextLink.setAttribute("href", callString);
        }

        function previousPage(){
            //if currentPage is 1
            //include code below to check if atleast one radio item is selected
            //var checkRadio = document.querySelector('input[name="theIssue"]:checked');

            //if currentPage is 2

            let previousPageCall = currentPage - 1; 
            let callString = "/activity1/?page=" + previousPageCall;
            let previousLink = document.getElementById("previous");
            previousLink.setAttribute("href", callString);
        }

block append myBody
    .mainStuff
        .uptext
            //on page 1 show intro
            if a1.currentPage == 1
                 p. 
                    #{a1.ImageStack[0].stackIntro}

            //on page 2 start with correct answer
            //show question -- then iterate through for correct answer 
            if a1.currentPage == 2
                p. 
                    #{a1.Question1.questionText}
                each val, index in a1.Question1.responseStack
                    if a1.Question1.responseStack[index].isCorrect 
                        p ** #{a1.Question1.responseStack[index].radioText}
        // if 1 or 2 show image
        if a1.currentPage == 1 || a1.currentPage == 2 || a1.currentPage == 3
            .showImage
                - var imgsrc = "/" + a1.ImageStack[0].stackImg1;
                img(src= imgsrc , alt="alt", width="300px" height="225px")
        //if page 3 show both real and manipualted image 
        if a1.currentPage == 3
            .showImage
                -var imgsrc2 = "/" + a1.ImageStack[0].stackImg2;
                img(src= imgsrc2 , alt="alt", width="300px" height="225px")
        // page 1 shows questions
        // page 2 show explainer text
        .lowtext
            if a1.currentPage == 1
                p. 
                    #{a1.Question1.questionText}
                form(action="" method="")
                    each val, index in a1.Question1.responseStack
                        - var myRadioName = a1.Question1.responseStack[index].radioName;
                        - var myRadioValue =  a1.Question1.responseStack[index].radioValue;
                        - var myRadioText = a1.Question1.responseStack[index].radioText;
                        input(type='radio', name= myRadioName, id= myRadioValue, value= myRadioValue)
                        label(for=myRadioValue) #{myRadioText}
                        <br>
            if a1.currentPage == 2
                p.
                    #{a1.ImageStack[0].stackExplain}
    
    .bottomPart
        a(class='NextButton myButton' id="next" onclick="nextPage()") Next &raquo;

        if a1.currentPage > 1
            a(class="PreviousButton myButton" id="previous" onclick="previousPage()") &laquo; Previous;